### IgProcessBuySellFunction

- **Purpose**:

  - The `IgProcessBuySellFunction` is designed to handle the execution of buy and sell orders based on trading signals. It acts as a bridge between the trading strategy outputs and the actual execution of trades on the IG trading platform.

- **Logic**:

  1. **Receive Trading Signals**:

     - The function receives trading signals generated by the `IgRunStrategyFunction`. These signals indicate whether to buy or sell specific stocks.

  2. **Execute Buy/Sell Orders**:

     - Based on the received signals, the function executes the corresponding buy or sell orders on the IG trading platform. This involves interacting with the platform's API to place the orders.
     - The `IG_buy_sell` class is initialized with the [[Configuration File - config.json|configuration]], signal, and trade parameters. It handles the login and setup of necessary session tokens.

  3. **Handle Open Positions**:

     - If there are no open positions, a new position is created.
     - If there are existing positions, the function checks if they are in the same or opposite direction as the signal. Opposite positions are closed, and new positions are created if necessary.

  4. **Trailing Stop Logic**:

     - For positions with no signal, the function evaluates and updates trailing stop levels based on market conditions and predefined price points.

  5. **Record Transaction Details**:

     - After executing the orders, the function records the transaction details. This includes information such as the stock symbol, order type (buy/sell), quantity, price, and timestamp.
     - The transaction details are stored in the `TransactionTable` and `EquityTable` DynamoDB tables. This storage is essential for tracking the performance and history of trades.

  6. **Error Handling**:
     - The function includes error handling to manage any issues that arise during the order execution process. If an error occurs, it captures the error details, including the function name and error message, and raises a `RuntimeError` with this information.

- **Output**:
  - The function outputs confirmation of the executed trades and updates the transaction records, ensuring that the trading system maintains an accurate and up-to-date record of all trading activities.
  - It also returns any error messages and a flag indicating whether errors exist, which can be used for further processing or alerting.
